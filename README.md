マニュアル作成ツール
====

定型のマニュアルを作成するツールを作成する。

当初はUIは作らず、テキスト文と画像ファイルを指定のフォルダに入れてコマンドラインツールを実行することで、HTML形式のファイルを出力する。

HTML形式のページをPDFに出力して配布することを想定するが、HTMLをそのままマニュアルページとして表示してもいいかもしれない。


サンプルとして、このツールを説明するsampleManualディレクトリ、sampleManual.htmlおよびsampleManual.pdfを用意したので、そちらを参照してください。ちなみに、
```bash
python create_manual.py -i sampleManual -o sampleManual.html
```
でビルドできます。


## 要件

* 入力は、mdファイルとjpeg/pngファイル群とする
* コマンドを実行するとhtmlファイルを出力する
* 画像はhtmlファイルにBase64で組み込む
* cssやフォントは外部から取得して良い
* HTMLからPDFに出力した時に、ページが正しく設定されること
* タイトルページや目次、索引ページも入れる


## ツールの使い方

0. venvをつくり、```pip install -r requirements.txt```する


1. マニュアルを新規作成する（ディレクトリ構造を作る）
   ```bash
   python create_manual.py --new newManual
   ```


2. マニュアルにトピックを追加する
   ```bash
   cd newManual
   python add_topic.py -p トピック１
   python add_topic.py -p トピック２
   ```
   これを実行すると、newManual/トピック１、newManual/トピック２ が生成され、その中にコンフィグファイルとスクリプト、description.htmlが置かれる。


3. トピックにステップを追加する（ステップを付け足すごとに実行する）
   ```bash
   cd トピック１
   python add_step.py
   python add_step.py
   ```
   これを実行すると、newManual/トピック１/config.ymlにステップ情報が追記され、mdファイル雛形が出力される。なお、mdファイル以外にもhtmlファイルに説明を記述することもできる。その場合は、config.ymlのfileに指定されているファイル名を変更する必要がある。


4. トピックの詳細情報を記述する
   * マニュアルページのトピックの冒頭に説明文を記述する（記述する内容がなければ放置でOK）
   * newManual/トピック１/description.md に記述する。
     * htmlファイルでも記述できる。ファイル名をfileで指定しているので、description.mdをdescription.htmlに変更すれば良い。
     * 簡単なものであれば newManual/トピック１/config.ymlのdescriptionの下に、fileではなくtextというキーを書いて、その下に配列で文字列を書くことも可能
       ```yaml
       description: # このページのトピックの詳細記述
          text: # このコンフィグファイルに直接記述を書く場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
            - トピックの説明の行１
            - トピックの説明の行２
            - トピックの説明の行３
     　```

5. ステップを記述する
  * 画像ファイルをおく。デフォルトでは、step1.pngのようにステップ番号と同じ名前のファイル名であることを期待している。
    * どのファイルを読み込むかは、config.ymlに書かれているので、読み込むファイル名を変えたければconfig.ymlを直接修正すればよい
    * 画像ファイルのサイズは、後述する様に1x1、1x2、2x1、2x2の４パターンを想定しており、どのサイズにしたいかはconfig.ymlの中の**imgSize**という項目に記述する。
　* 説明文を書く。デフォルトでは、step1.html（newManual/トピック１/step1.html） のようにステップ番号と同じ名前のファイル名であることを期待している。
    * どのファイルを読み込むかは、config.ymlに書かれているので、読み込むファイル名を変えたければconfig.ymlを直接修正すればよい
    * 簡単なものであれば newManual/トピック１/config.ymlのdescriptionの下に、fileではなくtextというキーを書いて、その下に配列で文字列を書くことも可能
      ```yaml
      caption: ステップタイトルを変更したければここも編集可能
      text: # 説明文をこのコンフィグファイルに直接書く場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
        - 説明記述の行１
        - 説明記述の行２
        - 説明記述の行３
      ```

6. 改ページを自分で入れなければならない！
   * PDFにした時に、ページが切り替わるタイミングを自動的に指定することができないので、自分で指定する必要がある
     * config.ymlに下記のように**newPage**キーを書くことで、その場所の後に改ページを入れることができる
        ```yaml
        steps:
           - image: 画像ファイルパス
             imgSize: 画像ファイルの大きさ(横x縦)。1x1,1x2,2x1,2x2のいずれか。1は180pxを表す。省略すると1x1
             caption: 記述パートの上に書く。省略すると「ステップ1」のように番号が上がっていく
             keywords:
               - 索引に載せるキーワード
               - 索引に載せるキーワード
               - 索引に載せるキーワード
             newPage: true   # <== これを書くと、このステップのあとページを切り替える
        ```


6. マニュアルHTMLを出力する
   ```bash
   python create_manual.py -i newManual -o newManual.html
   ```


7. PDFファイルを作成する
   * 上記で作成したnewManual.htmlを**Safari**で開く
   * 印刷ボタンを押し、PDFを出力する。
   * その時に、「背景を出力する」のフラグをON、ヘッダ/フッタを出力するのフラグをOFFにする




## コンフィグファイル

* マニュアル全体のコンフィグ
```yaml
issuer: 発行者名
title: このマニュアルのタイトル
sections:
  - title: このセクションのタイトル
    topics:
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス

  - title: このセクションのタイトル
    topics:
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス

  - title: このセクションのタイトル
    topics:
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス
      - ページ定義のディレクトリパス
```

* トピックごとのコンフィグ
```yaml
topic: このページが扱うトピックのタイトル
description: # このページのトピックの詳細記述
  text: # このコンフィグファイルに直接記述を書く場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
    - トピックの説明の行１
    - トピックの説明の行２
    - トピックの説明の行３
  file: ファイル名  # ファイルの内容（HTML）をそのままdescriptionパートに書き出したい場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
  keywords:
    - 索引に載せるキーワード
    - 索引に載せるキーワード
    - 索引に載せるキーワード

steps:
  - image: 画像ファイルパス
    imgSize: 画像ファイルの大きさ(横x縦)。1x1,1x2,2x1,2x2のいずれか。1は180pxを表す。省略すると1x1
    caption: 記述パートの上に書く。省略すると「ステップ1」のように番号が上がっていく
    text: # 説明文をこのコンフィグファイルに直接書く場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
      - 説明記述の行１
      - 説明記述の行２
      - 説明記述の行３
    file: ファイル名  # ファイルの内容（HTML）をそのままdescriptionパートに書き出したい場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
    keywords:
      - 索引に載せるキーワード
      - 索引に載せるキーワード
      - 索引に載せるキーワード

  - image: 画像ファイルパス
    caption: 記述パートの上に書く。省略すると「ステップ1」のように番号が上がっていく
    text: # 説明文をこのコンフィグファイルに直接書く場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
      - 説明記述の行１
      - 説明記述の行２
      - 説明記述の行３
    file: ファイル名  # ファイルの内容（HTML）をそのままdescriptionパートに書き出したい場合 (textかfileのどちらか一方を指定する(両方指定されたらtext優先))
    keywords:
      - 索引に載せるキーワード
      - 索引に載せるキーワード
      - 索引に載せるキーワード
```




## マニュアルの構成

* マニュアル本体は、左右1:2に分けて、左の１にはイメージ、右の２には説明文とする
* イメージサイズは、1x1,1x2,2x1,2x2の４パターンのどれかとする
  * 1 = 180pxとする。なので、2x2 = 360x360px
* 


## ファイル構成

* package.json
* style.css
* tailwind.config.js
  -> これらは、開発する時にWebStormでCSSの補完ができる様にするために設置しているだけで、ツールの実際の動きには何も影響しない。

